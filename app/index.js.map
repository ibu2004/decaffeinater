{"version":3,"sources":["index.js"],"names":["killProcess","pid","send","sleep","s","Promise","setTimeout","resolve","Index","props","state","time","process","countdown","onStart","bind","i","JSON","parse","stringify","setState","e","target","value","event","width","Component","render","document","getElementById"],"mappings":"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","file":"index.js","sourcesContent":["import \"babel-polyfill\";                     // polyfill to use async/await.\r\nimport {ipcRenderer} from \"electron\";        // ipc communication to main process.\r\nimport React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport {MuiThemeProvider, RaisedButton, TextField} from \"material-ui\";       // material design based ui framework.\r\n\r\n// Needed for onTouchTap in material-ui http://stackoverflow.com/a/34015469/988941\r\nimport injectTapEventPlugin from 'react-tap-event-plugin';\r\n\r\n// Sends ipc message to main process to kill app when called.\r\nfunction killProcess(pid) {\r\n  ipcRenderer.send(\"iCanKill?\", pid);\r\n}\r\n\r\n// sleep function to wait for some time.\r\nfunction sleep(s) {\r\n  return new Promise(resolve => setTimeout(resolve, s*1000));\r\n}\r\n\r\n// Our main React component (and only one)\r\nclass Index extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n\r\n    // Set up initial configuration for state.\r\n    this.state = {\r\n      time: 0,\r\n      process: \"\",\r\n      countdown: 0\r\n    };\r\n\r\n    // Bind functions here.\r\n    this.onStart = this.onStart.bind(this);\r\n  }\r\n\r\n  // click handler to start the countdown till process terminates.\r\n  async onStart() {\r\n    // initial variables here.\r\n    let i = 0;\r\n    // following 2 lines prevents user from tampering state during countdown. \r\n    let time = this.state.time*60;\r\n    let process = JSON.parse(JSON.stringify(this.state)).process;\r\n    // wait 1 second, then add 1 to this.state.countdown for (time) times.\r\n    for (i = 0; i < this.state.time*60; i++) {\r\n      await sleep(1);\r\n      this.setState({countdown: this.state.countdown+1});\r\n    }\r\n    killProcess(process);                 // send ipc message to main proc to kill process.\r\n    this.setState({countdown: 0});        // reset countdown :D\r\n  }\r\n\r\n  // This function is big, but it's 90% styling, nothing of interest here.\r\n  render() {\r\n    return (\r\n      <MuiThemeProvider>\r\n        <div>\r\n          <TextField\r\n            floatingLabelText=\"Time (in minutes)\"\r\n            type=\"number\" fullWidth={true}\r\n            hintText=\"Insert amount of time to play.\"\r\n            value={this.state.time}\r\n            onChange={(e) => this.setState({time: e.target.value})} />\r\n          <br />\r\n          <TextField\r\n            floatingLabelText=\"Process name\"\r\n            type=\"text\" fullWidth={true}\r\n            hintText=\"Insert the process name of the app.\"\r\n            value={this.state.process}\r\n            onChange={(event) => this.setState({process: event.target.value})} />\r\n          <br />\r\n          <RaisedButton onTouchTap={this.onStart} label=\"Click to start\" primary={true} fullWidth={true} />\r\n          <br />\r\n          <div className=\"text-xs-center\" id=\"countdown-statement\">Time left to finish: {this.state.time*60-this.state.countdown} seconds left, out of {this.state.time*60} seconds.</div>\r\n          <progress className=\"progress\" style={{width: \"100%\"}} value={this.state.countdown} max={this.state.time*60} aria-describedby=\"countdown-statement\"></progress>\r\n        </div>\r\n      </MuiThemeProvider>\r\n    );\r\n  }\r\n}\r\n\r\ninjectTapEventPlugin();\r\n// Render final app to the screen :D\r\nReactDOM.render(<Index />, document.getElementById(\"app\"));"]}